var values = `533.7   533.8   533.6   533.3   532.3   530.5   527.7   524.2   521.1   519.6
   519.7   520.9   521.9   522.5   523.0   523.9   525.1   526.0   526.1   525.5
   525.1   525.1   525.9   526.9   528.1   529.2   530.2   530.7   530.9   531.0
   531.0   531.0   531.0   531.1   531.2   531.4   531.5   531.3   530.7   529.4
   527.5   524.9   522.5   521.0   521.0   522.6   525.3   528.1   530.2   531.5
   532.4   532.9   533.1
   533.3   533.4   533.5   533.4   532.7   530.9   527.8   523.7   520.0   518.1
   518.4   520.0   521.5   522.3   522.8   523.6   524.8   525.7   525.7   524.8
   523.9   524.1   525.3   526.9   528.6   530.0   530.9   531.3   531.2   531.0
   531.0   531.0   531.0   531.0   531.2   531.5   531.8   531.7   531.1   529.9
   528.1   525.8   523.6   522.3   522.3   523.7   526.1   528.5   530.3   531.6
   532.4   532.9   533.1
   532.1   531.9   532.2   532.8   532.8   531.4   528.4   524.2   520.2   517.8
   517.8   519.3   521.2   522.3   522.7   523.2   524.1   525.1   525.5   524.9
   524.3   524.7   526.3   528.5   530.6   532.2   532.9   532.6   531.7   531.0
   530.8   530.8   530.8   530.8   531.2   531.7   532.1   531.9   531.4   530.7
   529.6   528.0   526.5   525.7   525.7   526.4   527.7   528.9   530.0   531.2
   532.2   532.8   533.1
   531.3   530.1   530.2   531.3   531.9   530.8   528.4   525.8   523.3   521.7
   521.2   521.7   522.7   523.3   523.2   523.2   524.0   525.3   526.7   527.7
   528.8   529.9   531.1   532.7   534.3   535.3   535.1   533.6   531.6   530.3
   530.1   530.2   530.1   530.3   531.0   531.9   532.3   531.9   531.5   531.4
   531.3   530.9   530.1   529.6   529.6   530.0   530.4   530.4   530.6   531.4
   532.3   532.9   533.2
   532.9   531.8   531.6   532.3   531.9   529.6   527.5   526.9   526.7   525.9
   525.0   524.2   524.3   524.3   523.4   523.4   524.3   525.5   526.9   528.3
   529.9   532.0   534.4   536.3   537.2   537.3   536.0   533.4   530.4   528.7
   528.7   529.3   529.8   530.4   531.5   532.6   532.9   532.3   532.0   532.6
   533.8   534.7   534.9   534.7   534.2   533.7   533.4   532.9   532.4   532.5
   532.9   533.4   533.8
   538.0   537.4   537.7   538.1   537.9   536.4   534.9   534.3   533.6   532.0
   529.2   526.5   525.2   524.2   522.2   522.6   524.7   526.6   528.6   530.5
   532.6   535.2   537.5   538.4   538.1   537.1   535.1   531.8   528.3   526.5
   527.0   528.7   530.3   531.8   533.3   534.8   535.4   535.1   534.9   535.7
   537.0   537.7   538.1   538.4   538.1   537.1   536.3   535.5   534.4   533.7
   534.0   534.7   535.2
   544.7   545.3   545.9   546.4   546.4   545.2   543.9   542.9   541.7   539.1
   535.3   531.8   529.9   527.3   523.7   522.2   523.6   526.3   529.3   532.0
   534.3   536.9   539.0   539.5   538.1   535.8   532.7   528.7   525.2   523.7
   524.9   528.0   531.4   534.7   536.9   538.1   539.4   541.0   542.2   543.0
   543.0   542.5   542.3   543.3   543.9   542.9   541.4   539.9   537.6   535.9
   536.1   537.1   537.6
   551.4   553.2   554.3   554.7   554.8   554.2   553.2   552.0   550.4   547.8
   544.0   540.8   538.6   536.1   531.1   525.7   523.9   527.0   531.5   534.4
   536.3   538.4   540.2   540.6   539.3   536.3   531.4   526.5   523.3   522.3
   523.8   527.4   530.9   534.1   536.8   538.7   541.1   543.6   545.9   548.1
   549.8   550.4   550.4   551.0   551.6   550.8   549.1   546.8   543.7   541.1
   540.5   540.7   540.7
   554.9   557.1   559.1   560.2   561.0   561.4   561.2   560.2   558.7   556.5
   553.9   551.2   548.6   545.9   542.5   537.9   534.9   535.9   539.4   542.4
   543.5   543.7   544.1   543.7   542.2   538.5   532.0   526.5   524.1   523.3
   524.5   527.3   529.6   531.6   534.2   536.8   540.0   543.5   547.0   550.7
   554.0   555.8   556.1   556.1   556.3   556.0   555.2   553.7   551.3   548.5
   546.4   545.2   544.1
   555.6   558.2   560.5   562.0   563.7   565.5   566.4   566.4   565.3   563.4
   561.3   559.0   556.7   554.7   553.0   551.3   549.4   549.2   552.4   557.1
   557.2   552.9   549.9   548.2   546.1   542.0   535.0   529.3   526.1   524.7
   525.1   527.1   528.5   529.9   532.0   534.7   538.4   543.2   547.9   552.2
   555.6   558.0   559.4   560.0   560.8   561.3   560.7   559.1   556.9   554.3
   551.8   549.6   547.7
   553.5   556.3   559.0   561.8   564.8   567.3   568.7   569.4   569.2   567.6
   565.6   563.9   562.5   561.4   560.5   559.6   558.9   558.9   561.3   565.2
   564.8   559.3   555.6   553.2   550.2   545.8   540.4   535.4   530.7   526.9
   525.2   525.3   526.0   527.2   529.1   531.3   535.5   541.2   547.2   552.2
   556.3   559.9   562.7   564.5   565.9   565.9   564.1   561.1   558.1   555.8
   554.2   552.7   550.6
   550.2   552.6   556.6   561.2   565.9   568.3   568.3   568.8   569.5   569.1
   568.7   568.5   568.0   567.3   566.8   566.4   565.9   565.4   565.2   565.8
   565.6   563.4   561.3   558.5   554.6   550.1   545.9   541.8   536.9   531.7
   527.6   525.5   525.2   526.2   527.4   528.4   531.7   538.4   546.2   552.1
   556.8   560.9   564.4   566.7   567.6   566.9   564.9   562.0   558.6   556.1
   554.9   553.9   552.4
   547.7   549.5   554.1   558.5   562.2   564.3   565.1   566.5   567.8   568.7
   569.9   571.0   571.0   570.5   570.3   570.4   570.3   569.9   568.9   568.0
   567.9   567.2   565.7   563.0   559.2   555.1   551.0   547.2   543.3   538.9
   534.6   531.0   529.1   529.1   529.8   530.5   534.5   541.9   549.6   554.6
   558.8   562.3   564.7   566.0   566.1   565.5   564.2   562.2   559.4   556.9
   555.4   554.3   553.4
   548.8   550.3   553.3   555.9   557.7   559.0   561.0   563.6   565.5   567.1
   569.3   571.4   572.1   571.9   571.8   572.1   572.4   572.4   572.1   571.5
   571.1   570.3   568.9   566.7   563.9   560.4   556.2   552.2   548.6   545.2
   542.2   539.7   538.2   538.0   537.8   537.9   541.4   548.0   554.9   559.7
   563.0   564.1   564.4   564.3   564.0   563.4   562.5   561.6   560.0   558.0
   556.3   555.2   554.7
   551.7   553.0   555.0   556.7   557.0   556.5   557.8   560.7   563.2   565.2
   567.5   569.9   571.4   572.0   572.5   572.8   572.6   572.5   572.9   573.3
   573.4   572.7   571.3   569.1   566.6   563.7   560.5   557.2   553.9   550.9
   549.4   549.1   548.8   548.3   547.9   548.5   551.5   556.0   560.3   564.0
   566.2   566.0   564.7   563.5   562.6   561.5   560.5   560.5   560.2   558.9
   557.7   557.1   557.0
   555.3   555.9   556.7   557.4   557.6   556.7   557.0   559.2   561.8   564.4
   566.5   568.3   569.8   571.1   572.6   574.0   574.4   574.4   574.7   575.1
   575.2   575.0   573.8   571.8   569.5   567.3   565.2   563.0   560.5   557.8
   556.6   556.7   557.2   557.3   557.5   559.0   561.3   563.3   565.2   567.0
   568.0   567.3   565.6   563.7   562.2   561.1   560.5   560.8   560.9   560.5
   560.2   560.2   560.4
   559.7   559.6   558.6   557.6   557.6   557.4   558.0   559.5   562.2   566.1
   567.7   568.6   569.2   570.1   572.4   575.5   576.4   576.6   576.7   576.7
   576.6   576.7   576.2   575.1   573.5   571.5   569.9   568.6   566.5   564.3
   563.1   562.6   562.8   563.5   564.1   565.2   566.7   568.0   568.6   568.9
   568.5   567.8   566.5   564.7   562.8   561.4   560.7   561.0   561.7   562.6
   563.7   564.6   564.9
   564.9   564.2   562.4   560.6   560.0   559.9   561.0   562.3   564.5   567.1
   568.1   568.6   569.1   570.0   572.4   575.3   576.9   577.8   578.5   578.3
   577.7   577.5   577.6   577.3   576.2   575.3   574.2   572.3   569.9   568.0
   567.1   566.5   566.4   567.2   568.2   568.9   570.0   571.0   571.0   569.4
   567.8   567.4   567.2   566.4   565.4   564.3   563.2   563.1   564.4   566.4
   568.4   569.6   569.7
   570.4   569.9   568.5   566.7   565.2   564.1   565.1   566.0   566.7   568.1
   568.7   568.7   569.0   569.7   571.0   572.8   574.7   576.8   578.9   579.5
   579.3   578.9   578.6   578.1   576.8   576.8   576.7   575.1   573.0   571.1
   569.7   568.9   568.3   568.7   569.3   570.2   571.6   573.2   573.7   572.8
   571.1   570.5   569.8   568.7   567.6   567.0   566.7   567.6   569.7   572.0
   573.6   574.1   573.9
   575.4   575.6   574.8   573.0   571.1   569.5   570.0   570.1   570.3   571.0
   570.9   569.5   569.2   569.5   570.0   571.5   573.2   576.7   580.2   580.7
   580.5   579.6   578.5   577.8   578.5   578.2   578.4   577.4   575.5   573.8
   572.4   571.3   570.3   569.9   570.6   571.9   573.5   575.2   576.1   575.9
   575.2   574.0   572.3   570.6   569.8   570.0   571.0   572.8   575.1   576.9
   577.5   577.4   577.1
   578.7   579.4   579.3   578.0   576.1   574.4   574.1   574.0   573.6   572.8
   572.2   571.8   571.6   572.0   572.8   572.9   574.4   579.1   580.7   580.6
   580.5   579.6   579.0   578.8   579.9   580.1   580.2   578.8   577.1   575.6
   573.9   572.5   572.0   572.3   573.3   574.5   575.7   577.3   578.0   578.1
   577.9   577.2   575.2   573.7   573.4   574.3   575.5   576.8   578.2   579.2
   579.4   579.4   579.2
   580.6   580.7   581.2   581.0   579.8   578.5   578.1   577.8   576.9   574.3
   573.6   573.1   573.1   574.7   576.4   577.8   579.7   580.9   580.0   580.0
   580.3   579.9   579.8   579.5   578.6   578.8   580.4   578.7   578.3   577.6
   576.4   575.3   575.2   575.5   576.2   577.2   578.5   580.1   580.5   580.1
   580.3   580.4   579.5   578.1   577.4   577.5   578.0   578.8   579.8   580.3
   580.6   580.7   580.6
   582.8   583.3   584.1   584.2   583.2   581.9   581.4   580.5   579.1   577.3
   576.5   575.4   575.7   577.7   580.4   582.5   583.4   582.9   581.0   579.8
   579.5   580.2   581.3   581.6   580.3   578.6   579.4   580.2   580.3   579.9
   579.1   578.4   578.5   578.7   579.0   579.2   579.9   581.8   582.6   582.4
   582.2   582.2   581.5   580.4   579.6   579.3   579.6   580.3   581.1   581.6
   581.7   581.7   581.6
   585.1   585.9   586.7   586.8   585.9   584.7   584.2   583.3   581.8   579.6
   578.6   577.7   577.4   578.8   581.5   583.3   583.8   583.0   581.5   580.1
   579.7   581.1   582.9   583.2   583.1   582.3   582.0   582.7   582.7   582.3
   581.5   581.1   581.3   581.8   582.0   581.3   581.4   583.0   583.9   583.7
   583.3   582.9   582.2   581.1   580.2   580.0   580.3   581.1   582.0   582.5
   582.6   582.5   582.4
   586.4   587.3   588.1   588.4   587.8   586.8   585.3   583.8   582.2   579.7
   579.1   578.6   578.1   579.7   582.2   583.6   584.0   583.6   582.2   580.8
   580.9   582.3   583.7   584.0   584.4   584.8   586.1   586.1   585.5   584.7
   584.4   584.5   585.0   585.1   584.8   584.3   584.3   584.9   585.1   584.8
   584.3   583.9   583.4   582.6   581.5   580.8   580.8   581.5   582.3   582.9
   583.2   583.3   583.3
   587.0   587.6   588.3   588.6   588.3   587.5   584.4   581.6   579.5   577.8
   577.3   577.3   577.9   580.0   582.3   583.3   584.0   584.4   585.2   586.5
   588.0   587.7   585.9   584.9   584.9   585.8   587.8   588.1   587.5   586.8
   586.4   586.4   587.0   587.5   587.3   586.7   586.4   586.6   586.7   586.6
   586.3   586.3   586.5   586.3   585.4   584.3   583.5   583.2   583.3   583.6
   584.0   584.2   584.2
   587.0   587.2   587.4   587.5   587.1   586.1   583.9   581.5   579.4   577.9
   577.3   577.5   578.6   580.6   582.8   584.3   585.4   586.4   587.5   588.4
   589.0   588.7   587.8   587.0   586.7   587.0   587.8   588.2   587.9   587.3
   587.0   587.2   587.9   588.4   588.4   588.0   588.1   588.6   589.1   589.1
   588.8   588.7   589.0   589.3   588.9   588.1   587.1   586.4   586.0   585.7
   585.6   585.4   585.3
   587.0   587.0   587.0   587.0   586.7   585.7   583.8   581.5   579.4   578.0
   577.4   577.8   579.3   581.7   584.2   585.9   587.1   587.9   588.5   588.9
   589.0   588.9   588.6   588.2   587.8   587.5   587.6   587.7   587.6   587.3
   587.2   587.5   588.1   588.6   588.9   589.0   589.4   589.9   590.1   589.9
   589.3   589.1   589.4   590.1   590.1   589.7   589.0   588.4   587.9   587.5
   587.1   586.6   586.2
   587.0   587.0   587.0   586.9   586.5   585.5   583.7   581.5   579.5   578.1
   577.6   578.1   579.8   582.3   584.8   586.6   587.7   588.4   588.7   588.9
   588.9   588.8   588.7   588.4   588.0   587.6   587.5   587.4   587.4   587.3
   587.3   587.5   588.0   588.5   588.9   589.2   589.6   589.9   590.0   589.6
   589.1   588.5   589.0   589.6   590.2   589.9   589.3   588.7   588.3   588.0
   587.6   587.2   586.8`.split(/\s+/).map(p=>+p)
//console.log(values)
//console.log(d3)
var n = 53, m= 29;
var width = n, height = m;

var extent = d3.extent(values);
var thresholds = d3.range(0, 20).map(p => extent[0]+ (extent[1]-extent[0])*p/20 );
var wide = true;

console.log(thresholds)
var contours = d3.contours()
    .size([n, m])
    .thresholds(thresholds);

const path = d3.geoPath();
var color = d3.scaleSequential(d3.interpolateOranges).domain(d3.extent(values))

const svg = d3.select("svg")
      .attr("viewBox", wide ? [0, 0, width, height] : [0, 0, height, width])
      .style("display", "block")
      .style("margin", "0 -14px");

  const g = svg.append("g")
      .attr("transform", wide ? null : `
        rotate(90 ${width/2},${height/2})
        translate(${(width - height) / 2},${(width - height) / 2})
      `)
      .attr("stroke", "white")
      .attr("stroke-width", 0.03);
  
  var i = 0;
  setInterval(_=>{
    threshold = thresholds[i++]
    g.append("path")
        .attr("d", path(contours.contour(values, threshold)))
        .attr("fill", color(threshold));
    
  },3000)
console.log(svg.node())
//d3.select('#plot').append(svg.node())