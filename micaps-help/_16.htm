<!DOCTYPE html><html>

<head>
  <title>1.5 、数据源（Samba  MDFS  SAV） - MICAPS4.0系统用户手册</title>
  <meta http-equiv="content-type" content="text/html; charset=gb2312" />
  <meta name="GENERATOR" content="Macrobject Word-2-CHM">
  <link rel="stylesheet" href="Word2Chm.css" type="text/css">
  <link rel="stylesheet" href="default.css" type="text/css" />
</head>

<body lang=ZH-CN link=blue vlink=purple style='text-justify-trim:punctuation'>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
    <tr>
      <td class="moHeader">&nbsp;1.5 、数据源（Samba  MDFS  SAV）</td>
    </tr>
  </table>
  
  <p></p>

<div class=Section1 style='layout-grid:15.6pt'>



<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>在</span><span
lang=EN-US>1.3.2</span><span style='font-family:宋体'>节介绍</span><span lang=EN-US>config\</span><span
lang=EN-US style='font-family:宋体'>datasources.ini</span><span style='font-family:
宋体'>文件时，曾介绍过该文件主要用于配置<span lang=EN-US>MICAPS4</span>客户端所使用的<span lang=EN-US>“</span>数据源<span
lang=EN-US>”</span>信息，在之前的版本中，<span lang=EN-US>MICAPS</span>客户端所对应的数据来源比较单一，通常都是通过共享本地文件夹所使用的数据，数据一般存储在一个单一的<span
lang=EN-US>“</span>数据服务器<span lang=EN-US>”</span>中，但随着观测种类和预报技术的提升，这种单一数据服务器提供全部数据服务的方式已经不能满足大数据量、高并发访问、高速检索及传输文件的使用需求，因此，在<span
lang=EN-US>MICAPS4</span>系统中，我们引入了<span lang=EN-US>“</span>分布式高速缓存<span
lang=EN-US>”</span>服务器的概念，也就是用多台分布式数据存储来解决气象海量数据的高并发高速访问所带来的问题，我们将这个<span
lang=EN-US>“</span>分布式高速缓存<span lang=EN-US>”</span>称为<span lang=EN-US>MDFS</span>服务。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:宋体'>MICAPS4</span><span style='font-family:宋体'>现在使用的数据环境如下图所示，<span
lang=EN-US>MICAPS4</span>目前支持多种数据环境</span></p>

<p class=MsoNormal align=center style='text-align:center;page-break-after:avoid'><span
lang=EN-US><img width=472 height=250 src="temp.files/image050.gif"></span></p>

<p class=MsoCaption><span style='font-family:黑体;color:black'>图</span><span
lang=EN-US style='color:black'> 1.5- </span><span
lang=EN-US style='color:black'>1</span><span lang=EN-US style='color:black'>
MICAPS</span><span style='font-family:黑体;color:black'>数据源</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>如上图所示，</span><span lang=EN-US>MICAPS4</span><span
style='font-family:宋体'>默认的配置文件中</span><span lang=EN-US>(config/datasources.ini)</span><span
style='font-family:宋体'>默认使用了</span><span lang=EN-US>4</span><span
style='font-family:宋体'>个数据源，其中</span><span lang=EN-US>mdfs</span><span
style='font-family:宋体'>即为前面提到的</span><span lang=EN-US>“</span><span
style='font-family:宋体'>分布式数据缓存</span><span lang=EN-US>”</span><span
style='font-family:宋体'>，该数据集群搭建在</span><span lang=EN-US>CIMISS</span><span
style='font-family:宋体'>系统之上，接上之后自动完成数据格式处理及存储处理，</span><span lang=EN-US>MICAPS4</span><span
style='font-family:宋体'>可直接访问使用（访问配置方式请参考</span><span lang=EN-US>1.3.1</span><span
style='font-family:宋体'>节（</span><span lang=EN-US>MICAPS.exe.config</span><span
style='font-family:宋体'>文件说明）。</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; samba</span><span
style='font-family:宋体'>为</span><span lang=EN-US>MICAPS3</span><span
style='font-family:宋体'>传统数据源，使用</span><span lang=EN-US>“</span><span
style='font-family:宋体'>共享文件夹</span><span lang=EN-US>”</span><span
style='font-family:宋体'>方式提供数据访问，</span><span lang=EN-US>MICAPS4</span><span
style='font-family:宋体'>对这种数据访问方式进行了兼容。</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Samba2</span><span
style='font-family:宋体'>为本地其它数据源，</span><span lang=EN-US>path</span><span
style='font-family:宋体'>指定数据源路径。</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Sav</span><span
style='font-family:宋体'>为“集合预报工具箱</span><span lang=EN-US>”</span><span
style='font-family:宋体'>软件所使用的集合预报数据，</span><span lang=EN-US>MICAPS4</span><span
style='font-family:宋体'>对该部分数据进行了部分兼容，可通过</span><span lang=EN-US>MICAPS4</span><span
style='font-family:宋体'>集合预报功能模块进行加载显示。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>MICAPS4</span><span style='font-family:宋体'>允许用户添加自定义数据源，目前只支持本地文件或</span><span
lang=EN-US>”</span><span style='font-family:宋体'>共享文件夹</span><span lang=EN-US>“</span><span
style='font-family:宋体'>方式的数据源，在</span><span lang=EN-US>config/datasources.ini</span><span
style='font-family:宋体'>配置文件中添加一个</span><span lang=EN-US>section</span><span
style='font-family:宋体'>即可，</span><span lang=EN-US>section</span><span
style='font-family:宋体'>名称可自定义，如下所示：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>[myownsource]</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>path=X:/ARealFolder/&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>path</span><span style='font-family:宋体'>为关键字，后面的路径最后需要增加一个斜线</span><span
lang=EN-US>”/”</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>&nbsp;</span></p>


</div>
  <p></p>

</body>

</html>
